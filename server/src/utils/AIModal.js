const { GoogleGenerativeAI } = require("@google/generative-ai");

const apiKey = process.env.GOOGLE_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

module.exports.chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget ,Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON formatted travel plan for a 3-day budget-friendly trip to Las Vegas for a couple, along with hotel options and a detailed itinerary.\n\n```json\n{\n  "tripDetails": {\n    "location": "Las Vegas",\n    "duration": "3 Days",\n    "travelers": "Couple",\n    "budget": "Cheap"\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$40 - $80 per night",\n      "hotelImageUrl": "https://example.com/circuscircus.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1348,\n        "longitude": -115.1641\n      },\n      "rating": 3.5,\n      "description": "A budget-friendly option on the Strip with its own theme park and free circus acts. Older but offers good value."\n    },\n        {\n      "hotelName": "Excalibur Hotel & Casino",\n      "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$50 - $90 per night",\n     "hotelImageUrl": "https://example.com/excalibur.jpg",\n      "geoCoordinates": {\n        "latitude": 36.0974,\n         "longitude": -115.1742\n      },\n      "rating": 3.8,\n      "description": "A castle-themed hotel on the south end of the Strip offering basic rooms, several dining options, and a pool area."\n    },\n    {\n      "hotelName": "Bally\'s Las Vegas Hotel & Casino",\n      "hotelAddress": "3645 S Las Vegas Blvd, Las Vegas, NV 89109",\n       "price": "$60 - $100 per night",\n      "hotelImageUrl": "https://example.com/ballys.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1119,\n        "longitude": -115.1708\n      },\n      "rating": 4.0,\n      "description": "Centrally located on the Strip, Bally\'s offers comfortable rooms, a large pool, and good access to other attractions."\n    }\n      ,\n      {\n      "hotelName": "Tuscany Suites & Casino",\n      "hotelAddress": "255 E Flamingo Rd, Las Vegas, NV 89169",\n      "price": "$70 - $120 per night",\n       "hotelImageUrl": "https://example.com/tuscany.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1151,\n        "longitude": -115.1517\n      },\n      "rating": 4.2,\n      "description": "Located off the Strip, this hotel offers spacious suites, a relaxing pool area, and a quieter atmosphere."\n    }\n  ],\n  "itinerary": {\n     "day1": {\n        "theme": "Exploring the Strip (South)",\n        "bestTimeToVisit": "Afternoon & Evening",\n        "plan": [\n          {\n            "placeName": "Welcome to Fabulous Las Vegas Sign",\n            "placeDetails": "Iconic sign at the south end of the Strip, perfect for a classic photo opportunity.",\n            "placeImageUrl": "https://example.com/welcomesign.jpg",\n            "geoCoordinates": {\n              "latitude": 36.0827,\n               "longitude": -115.1726\n            },\n            "ticketPricing": "Free",\n             "rating": 4.6,\n            "timeTravel": "10 mins drive from hotels"\n          },\n           {\n            "placeName": "Bellagio Conservatory & Botanical Garden",\n            "placeDetails": "Beautiful, free garden display with seasonal themes inside the Bellagio Hotel.",\n            "placeImageUrl": "https://example.com/bellagio.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1125,\n              "longitude": -115.1741\n            },\n            "ticketPricing": "Free",\n            "rating": 4.8,\n            "timeTravel": "15-20 mins from welcome sign"\n          },\n            {\n            "placeName": "Bellagio Fountains",\n            "placeDetails": "Spectacular free water show in front of Bellagio hotel, with music and lights.",\n             "placeImageUrl": "https://example.com/fountains.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1125,\n              "longitude": -115.1726\n            },\n            "ticketPricing": "Free",\n             "rating": 4.7,\n            "timeTravel": "right outside the conservatory"\n          },\n           {\n            "placeName": "The LINQ Promenade",\n             "placeDetails": "Open-air shopping, dining, and entertainment area with the High Roller observation wheel.",\n             "placeImageUrl": "https://example.com/linq.jpg",\n            "geoCoordinates": {\n              "latitude": 36.1169,\n              "longitude": -115.1708\n            },\n            "ticketPricing": "Free (High Roller extra cost)",\n              "rating": 4.4,\n            "timeTravel": "5-10 mins from Bellagio fountain"\n          },\n           {\n                "placeName": "Street Performance",\n                "placeDetails": "Enjoy various free street shows and performances by talented performers along the Strip.",\n                "placeImageUrl": "https://example.com/streetperf.jpg",\n               "geoCoordinates":{\n                   "latitude":36.1167,\n                   "longitude": -115.1726\n                   },\n               "ticketPricing":"Free",\n               "rating":4.3,\n               "timeTravel": "along the strip"\n             }\n        ]\n      },\n     "day2": {\n          "theme": "Fremont Street & Downtown",\n           "bestTimeToVisit": "Evening",\n        "plan": [\n            {\n            "placeName": "Fremont Street Experience",\n            "placeDetails": "Pedestrian mall with a huge video screen canopy, light shows, and live music.",\n            "placeImageUrl": "https://example.com/fremont.jpg",\n            "geoCoordinates": {\n                "latitude": 36.1699,\n                "longitude": -115.1401\n              },\n            "ticketPricing": "Free",\n             "rating": 4.5,\n             "timeTravel": "15 - 20 mins drive from the Strip"\n          },\n          {\n              "placeName": "Container Park",\n               "placeDetails": "Unique shopping and entertainment complex made of shipping containers with a fun playground",\n               "placeImageUrl":"https://example.com/containerpark.jpg",\n               "geoCoordinates":{\n                 "latitude": 36.1675,\n                   "longitude":-115.1385\n                 },\n                "ticketPricing":"Free",\n                "rating":4.2,\n               "timeTravel":"5 - 10 mins walk from Fremont Street Experience"\n            },\n            {\n            "placeName": "Golden Nugget Pool",\n            "placeDetails": "Pool area with a shark tank (check for day pass pricing if not a guest).",\n            "placeImageUrl": "https://example.com/goldennugget.jpg",\n             "geoCoordinates": {\n              "latitude":36.1704,\n                "longitude":-115.1426\n             },\n            "ticketPricing": "Variable (day pass)",\n             "rating":4.1,\n             "timeTravel":"right at Golden Nugget hotel"\n            },\n            {\n                "placeName": "Mob Museum",\n                "placeDetails": "Interactive museum about organized crime history (optional, ticket cost).",\n                "placeImageUrl": "https://example.com/mobmuseum.jpg",\n               "geoCoordinates":{\n                   "latitude":36.1680,\n                   "longitude":-115.1417\n                   },\n                "ticketPricing":"$29",\n                "rating":4.6,\n                "timeTravel":"5 mins walk from Fremont Street Experience"\n\n            },\n             {\n                 "placeName": "Heart Attack Grill",\n                  "placeDetails":" Famous for unhealthy massive burgers and entertaining experience ( optional for dine-in ).",\n                  "placeImageUrl": "https://example.com/heartattack.jpg",\n                  "geoCoordinates":{\n                    "latitude":36.1704,\n                   "longitude": -115.1407\n                    },\n                  "ticketPricing": "Variable (Food)",\n                 "rating":4,\n                  "timeTravel":"near Fremont Street Experience"\n             }\n          ]\n        },\n      "day3": {\n           "theme": "Exploring the Strip (North)",\n          "bestTimeToVisit":"Morning & Afternoon",\n         "plan": [\n           {\n             "placeName": "The Venetian & Grand Canal Shoppes",\n              "placeDetails": "Recreation of Venice with gondola rides, shops, and cafes.",\n               "placeImageUrl":"https://example.com/venetian.jpg",\n             "geoCoordinates":{\n               "latitude": 36.1216,\n                "longitude": -115.1699\n             },\n              "ticketPricing": "Free (Gondola ride extra)",\n               "rating":4.7,\n             "timeTravel": "10 - 15 mins drive from downtown"\n\n           },\n           {\n             "placeName":"The Volcano at The Mirage",\n             "placeDetails": "Free volcano show with fire and water effects in front of the Mirage Hotel",\n             "placeImageUrl":"https://example.com/miragevolcano.jpg",\n             "geoCoordinates":{\n                 "latitude":36.1215,\n                 "longitude":-115.1717\n                 },\n               "ticketPricing":"Free",\n               "rating":4.4,\n              "timeTravel":"5 mins from The Venetian"\n           },\n           {\n              "placeName":"Eiffel Tower Viewing Deck",\n              "placeDetails":"Replica of the Eiffel Tower with great views of the Strip (optional, ticket cost).",\n              "placeImageUrl":"https://example.com/eiffeltower.jpg",\n              "geoCoordinates":{\n                  "latitude":36.1097,\n                  "longitude":-115.1724\n              },\n              "ticketPricing":"$27",\n             "rating":4.5,\n             "timeTravel": "10 mins from The Mirage"\n           },\n            {\n             "placeName": "Caesars Palace & The Forum Shops",\n              "placeDetails": "Luxury hotel and shopping mall with Roman-themed architecture and fountains.",\n                "placeImageUrl": "https://example.com/caesars.jpg",\n               "geoCoordinates":{\n                   "latitude": 36.1164,\n                   "longitude":-115.1732\n                   },\n               "ticketPricing":"Free",\n                "rating": 4.6,\n                "timeTravel":"5 mins from Eiffel tower"\n            },\n            {\n                "placeName":"Free Entertainment at Casinos",\n                 "placeDetails": "Many Casinos offer free entertainment such as lounge acts and musical performances",\n                "placeImageUrl":"https://example.com/casinoacts.jpg",\n                 "geoCoordinates":{\n                  "latitude":36.1153,\n                     "longitude":-115.1736\n                     },\n                 "ticketPricing":"Free",\n                 "rating":4.3,\n                  "timeTravel":"along the Strip"\n            }\n          ]\n        }\n  }\n}\n```\n\n**Important Notes:**\n\n*   **Prices are Estimated:** Hotel and ticket prices can vary significantly based on time of year, day of the week, and availability. Check for current deals and book in advance where possible.\n*   **Transportation:** Walking is a good way to see the Strip. Consider using ride-sharing services for longer distances, especially to get to downtown.  Las Vegas has a bus system as well.\n*   **Free Activities:** Las Vegas has many free activities, and this itinerary focuses on those to stay budget-friendly.\n*   **Dining:**  To stay budget-friendly, look for affordable dining options, such as fast food, food courts or try happy hour deals at bars.\n*   **Image URLs:** The image URLs are placeholders. You\'ll need to replace them with actual image URLs you find for the respective places.\n*   **Flexibility:** This is a suggested itinerary. Feel free to tailor it to your specific interests and preferences.\n\nRemember to check the official websites for each location for the most up-to-date information, hours of operation, and ticket prices. Have a great time in Las Vegas!\n',
        },
      ],
    },
  ],
});
